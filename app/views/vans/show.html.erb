<div class="container">
  <div class="row">
    <div class="col-6" style="margin-top: 3em;">
      <div class="container">
        <div class="row d-flex justify-content-center", style="width:100%;">
          <%if @van.photo.attached?%>
            <%= image_tag @van.photo, alt: 'Photo du van', style: "width:80%; height:auto" %>
          <%else%>
            <p>=== Il n'y a pas encore de photo lié à ce van ===</p>
          <%end%>
        </div><br>
        <div class="row">
          <div class="card border-primary mb-3" style="min-width: 20rem;width:100%">
            <div class="card-body">
              <h4 class="card-title"><%= @van.title%></h4>
              <div class="card-text">
                <p>Ville : <%= @van.city %></p>
                <p> Description : <%= @van.description %>
                <p> Prix par jour : <%= @van.price_per_day %>
              </div>
            </div>
          </div>
        </div>
        <div class="row" >
          <div class="card border-primary mb-3 mr-5" style="min-width: 15rem;">
            <div class="card-header text-center">Caractéristiques
            </div>
            <div class="card-body">
              <p class="card-text">
              <p> marque : <%= @van.brand%> </p>
              <p> immatriculation : <%= @van.registration%> </p>
              <p> année : <%= @van.year %>
              <p> carburant : <%= @van.energy%></p>
            </div>
          </div>
          <div class="card border-primary mb-3" style="min-width: 15rem;">
            <div class="card-header text-center">Options</div>
            <div class="card-body">
              <div class="card-text">
              <p> nombre de lits : <%= @van.bed_number%> </p>
              <% if @van.has_wc == false%>
                <p> wc : non </p>
              <% else%>
                <p> wc : oui </p>
              <%end%>
              <% if @van.has_fridge == false%>
                <p> réfrigérateur : non </p>
              <% else%>
                <p> réfrigérateur : oui </p>
              <%end%>
              <% if @van.has_shower == false%>
                <p> douche : non </p>
              <% else%>
                <p> douche : oui </p>
              <%end%>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-6" style="margin-top: 3em;">
      <div class="container">
        <div class="row">
          <div class="col-6" style="margin-top: 3em;">
            <%= render partial: 'vans/calendar'%>
          </div>
        </div>
        <div class="row d-flex justify-content-center align-items-center">
        <p class="text-secondary" style="width:80%">Dernière étape avant la réservation ! Vérifie que tes dates sont toujours disponibles :</p>
          <div class="col-6" >
            <% if current_user %>
              <%= form_with(url: url_for(controller: 'rentals', action: 'create', rental_id: @van.id)) do |form| %>
              <p>début : <%= form.date_field :start %></p>
              <p>fin : <%= form.date_field :end %></p>
              <%= form.submit "Vérifier les disponibilités" %>
              <% end %>

              <% if @rental && @rental.valid? %>
                <p> Le van est bien disponible du <%= @rental.start_date.strftime("%d/%m/%Y")%> au <%= @rental.end_date.strftime("%d/%m/%Y")%> </p>
                <p> Le coût total de la réservation est de <%= @rental.total_price %> euros </p>
                <p> Souhaitez-vous le réserver ? </p>
              <%= button_to "Réserver et payer", checkout_create_path(total: @rental.total_price), class: "btn btn-danger", data: {turbo: false} %>
              <% end %>
            <%end%>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
